dist: bionic
language: java

cache:
  directories:
  - "$HOME/.m2"

env:
  global:
  - APP_UUID=398ea708-50eb-499f-98d3-14cc7692668c

matrix:
  include:
  - stage: Test
    jdk: openjdk8
    before_install: export APP_PRIVATE_KEY=$(cat travis/fake_private_key_for_testing)
    install: mvn clean install -Dmaven.javadoc.skip=true -B -V --settings travis/settings.xml
    script: skip
  - stage: Publish
    jdk: openjdk8
    install: skip
    script: skip
    deploy:
    - provider: script
      script: "./travis/deploy.sh"
      on:
        tags: true
